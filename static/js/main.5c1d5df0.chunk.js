(this["webpackJsonpproject-psychopompt-elts"]=this["webpackJsonpproject-psychopompt-elts"]||[]).push([[0],{15:function(e,t,n){e.exports=n(29)},16:function(e,t,n){},21:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);n(16);var a=n(0),r=n.n(a),o=n(6),l=n.n(o),c=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function i(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(21);var u,s=n(3),d=["Briliant Father","Unconquerable Warrior","The Archivist"];!function(e){e[e.Father=0]="Father",e[e.Warrior=1]="Warrior",e[e.Archivist=2]="Archivist"}(u||(u={}));var h,f=function(){var e=Object(s.c)((function(e){return e.gods})),t=e.archiverApproval,n=e.archiverDelta,a=e.fatherApproval,o=e.fatherDelta,l=e.warriorApproval,c=e.warriorDelta;return r.a.createElement("div",{style:{textAlign:"left",border:"solid 1px",width:"max-content"}},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement(m,{name:d[0],values:[a,o]}),r.a.createElement(m,{name:d[1],values:[l,c]}),r.a.createElement(m,{name:d[2],values:[t,n]}))))},m=function(e){var t=e.name,n=e.values,a="";switch(Math.sign(n[1])){case-1:a="-";break;case 1:a="+"}return r.a.createElement("tr",null,r.a.createElement("th",null,t),r.a.createElement("td",null,"".concat(n[0]," (").concat(a).concat(Math.abs(n[1]),")")))},p=["Disease","Killed in battle","Murdered","Starvation","Freak accident","Mauled by animals","Old age"];!function(e){e[e.Disease=0]="Disease",e[e.KilledBattle=1]="KilledBattle",e[e.Murdered=2]="Murdered",e[e.Starvation=3]="Starvation",e[e.FreakAccident=4]="FreakAccident",e[e.MauledAnimals=5]="MauledAnimals",e[e.Old=6]="Old"}(h||(h={}));var v,E=["Priest","King","Scholar","General","Farmer","Soldier","Thief"];!function(e){e[e.Priest=0]="Priest",e[e.King=1]="King",e[e.Scholar=2]="Scholar",e[e.General=3]="General",e[e.Farmer=4]="Farmer",e[e.Soldier=5]="Soldier",e[e.Thief=6]="Thief"}(v||(v={}));var b,g=["Blasphemy","Murder","Desertion","Adultery"];!function(e){e[e.Blasphemy=0]="Blasphemy",e[e.Murder=1]="Murder",e[e.Desertion=2]="Desertion",e[e.Adultery=3]="Adultery"}(b||(b={}));var w=function(){var e=Object(s.c)((function(e){return e.world.currentSoul}));return r.a.createElement("div",{style:{textAlign:"left",border:"solid 1px",width:"max-content"}},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("td",null,e.name)),r.a.createElement("tr",null,r.a.createElement("th",null,"Ocupation"),r.a.createElement("td",null,null!==e.occupation?E[e.occupation]:"N/A")),r.a.createElement("tr",null,r.a.createElement("th",null,"Age of Death"),r.a.createElement("td",null,e.ageDeath)),r.a.createElement("tr",null,r.a.createElement("th",null,"Cause of death"),r.a.createElement("td",null,p[e.causeOfDeath])),r.a.createElement("tr",null,r.a.createElement("th",null,"Worships"),r.a.createElement("td",null,e.worships.length>0?e.worships.map((function(t,n){return"".concat(d[t]).concat(e.worships.length-1!==n?", ":"")})):"Atheist")),r.a.createElement("tr",null,r.a.createElement("th",null,"Taboos Broken"),r.a.createElement("td",null,e.taboosBroken.length>0?e.taboosBroken.map((function(t,n){return"".concat(g[t]).concat(e.taboosBroken.length-1!==n?", ":"")})):"None")))))},D=n(1),y=n(2),A=Object(y.a)("SetFather"),S=Object(y.a)("SetWarrior"),j=Object(y.a)("SetArchivist"),k=Object(y.b)({archiverApproval:0,archiverDelta:0,fatherApproval:0,fatherDelta:0,warriorApproval:0,warriorDelta:0},(function(e){e.addCase(A,(function(e,t){e.fatherApproval+=t.payload,e.fatherDelta=t.payload})).addCase(S,(function(e,t){e.warriorApproval+=t.payload,e.warriorDelta=t.payload})).addCase(j,(function(e,t){e.archiverApproval+=t.payload,e.archiverDelta=t.payload}))})),O=n(4),M=n.n(O),B=5,F=10,R=10;function C(e){var t=[];for(var n in e)t.push(e[n]);return t=t.slice(t.length/2)}var W=n(14);function T(e){return e[Math.floor(Math.random()*e.length)]}function x(e){return T(C(e))}function L(e){return function(e,t){return Math.floor(Math.random()*(t+1-e)+e)}(0,e)}function K(){var e,t=L(80),n=null,a=[],r=[];return t<14?e=T([h.Disease,h.MauledAnimals,h.Murdered,h.Starvation]):(e=x(h),n=x(v),a=function(){var e=L(100),t=0;e<50?t=1:e<75?t=2:e<80&&(t=3);return function(e,t){for(var n=Object(W.a)(e),a=[],r=function(e){var t=T(n);a.push(t),n=n.filter((function(e){return e!==t}))},o=0;o<t;o++)r();return a}(C(b),t)}(),r=function(){for(var e=C(u),t=[],n=0;n<e.length;n++)2===L(2)&&t.push(e[n]);return t}()),{name:"TO BE IMPLEMENTED",ageDeath:t,causeOfDeath:e,occupation:n,taboosBroken:a,worships:r}}var P=Object(y.a)("newSoul"),N=Object(y.a)("newDay"),G=Object(y.a)("endDay"),I={currentSoul:K(),soulsLeft:R,day:0,chaos:0,timerRunning:!1},U=Object(y.b)(I,(function(e){e.addCase(P,(function(e){e.soulsLeft--,e.soulsLeft<=0&&(e.timerRunning=!1,e.timerStart=void 0,e.timerEnd=void 0),e.currentSoul=K()})).addCase(N,(function(e){e.timerRunning=!0,e.timerStart=M()(),e.timerEnd=M()().add(B,"minute").add(1,"s"),e.day++,e.soulsLeft+=F})).addCase(G,(function(e){e.timerRunning=!1,e.timerStart=void 0,e.timerEnd=void 0,e.chaos+=e.soulsLeft}))})),J=Object(D.c)({gods:k,world:U}),q=Object(D.e)(J),$={id:u.Archivist,approvalDelta:function(e){var t=0;switch(e.ageDeath<=40&&t++,e.occupation){case v.Priest:case v.Scholar:t++;break;case v.Farmer:t--}switch(e.causeOfDeath){case h.FreakAccident:case h.MauledAnimals:t++}return t},onAccept:function(e){return this.approvalDelta(e)},onReject:function(e){return Math.max(Math.round(this.approvalDelta(e)/2),0)},onDestroy:function(e){return Math.min(-this.approvalDelta(e),-1)},onSort:function(e,t){var n;n=void 0===t?this.onDestroy(e):t===this.id?this.onAccept(e):this.onReject(e),q.dispatch(j(n))}},z={gods:[{id:u.Father,approvalDelta:function(e){var t=0;switch(e.occupation){case v.King:case v.Priest:t+=1;break;case v.Thief:t--}return t+=e.worships.includes(u.Father)?2:-1,t+=e.worships.some((function(e){return e!==u.Father}))?-1:0,(e.taboosBroken.includes(b.Blasphemy)||e.taboosBroken.includes(b.Adultery))&&t--,t},onAccept:function(e){return this.approvalDelta(e)+1},onReject:function(e){return-1},onDestroy:function(e){return-this.approvalDelta(e)},onSort:function(e,t){var n;n=void 0===t?this.onDestroy(e):t===this.id?this.onAccept(e):this.onReject(e),q.dispatch(A(n))}},{id:u.Warrior,approvalDelta:function(e){var t=0;switch(e.occupation){case v.King:case v.General:t+=2;break;case v.Soldier:t++}switch(e.causeOfDeath){case h.KilledBattle:t++;break;case h.Old:case h.Disease:t--}return e.ageDeath>=14&&(e.ageDeath<40?t++:t--),e.taboosBroken.includes(b.Desertion)&&t--,t},onAccept:function(e){return this.approvalDelta(e)+1},onReject:function(e){return-this.approvalDelta(e)},onDestroy:function(e){return-this.approvalDelta(e)},onSort:function(e,t){var n;n=t?t===this.id?this.onAccept(e):this.onReject(e):this.onDestroy(e),q.dispatch(S(n))}},$],onSort:function(e,t){this.gods.forEach((function(n){return n.onSort(e,t)})),q.dispatch(P())}},H=function(){var e=Object(s.c)((function(e){return e.world})),t=e.currentSoul,n=e.timerRunning;return r.a.createElement("div",null,z.gods.map((function(e){return r.a.createElement("button",{key:e.id,onClick:function(){return z.onSort(t,e.id)},disabled:!n},d[e.id])})),r.a.createElement("button",{onClick:function(){return z.onSort(t)},disabled:!n},"Destroy"))},Q=n(11),V=function(){var e=Object(a.useState)(null),t=Object(Q.a)(e,2),n=t[0],o=t[1],l=Object(a.useState)(null),c=Object(Q.a)(l,2),i=c[0],u=c[1],d=Object(s.c)((function(e){return e.world})),h=d.chaos,f=d.soulsLeft,m=d.day,p=d.timerRunning,v=d.timerEnd,E=d.timerStart,b=Object(s.b)();Object(a.useEffect)((function(){p?o(setInterval(g,1e3)):n&&(clearInterval(n),o(null))}),[p]);var g=function(){if(v&&E){var e=v.diff(M()());e>0?u(M()(e)):b(G())}};return r.a.createElement("table",{style:{border:"solid 1px"}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Chaos"),r.a.createElement("td",null,h)),r.a.createElement("tr",null,r.a.createElement("th",null,"Souls Left"),r.a.createElement("td",null,f)),r.a.createElement("tr",null,r.a.createElement("th",null,"Day"),r.a.createElement("td",null,m)),r.a.createElement("tr",null,r.a.createElement("th",null,"Timer"),r.a.createElement("td",null,p&&i?i.format("mm:ss"):"00:00")),r.a.createElement("tr",null,r.a.createElement("td",{rowSpan:2},r.a.createElement("button",{onClick:function(){return b(N())},disabled:p},"New Day")))))},X=function(){return r.a.createElement("div",null,r.a.createElement(w,null),r.a.createElement(H,null),r.a.createElement(f,null),r.a.createElement(V,null))};function Y(){return r.a.createElement(s.a,{store:q},r.a.createElement(X,null))}l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/project-psychopompt-elts",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/project-psychopompt-elts","/service-worker.js");c?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):i(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):i(t,e)}))}}()}},[[15,1,2]]]);
//# sourceMappingURL=main.5c1d5df0.chunk.js.map